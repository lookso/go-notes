
# BoltDB文件存储引擎原理介绍

特点：
整个数据库就一个 db 文件，贼简单；
基于 B+ 树的索引，读效率高效且稳定；
读事务可多个并发，写事务只能串行；

缺点：
事务的实现贼简单，但是写的开销太大；
boltdb 写事务不能并发，只能靠批量操作来缓解性能问题；


## BoltDB特性介绍

### 同类型应用对比

### Mysql innodb介绍

## BoltDB实现原理

```shell
hexdump -C ./myFile.db
00000000  00 00 00 00 00 00 00 00  04 00 00 00 00 00 00 00  |................|
00000010  ed da 0c ed 02 00 00 00  00 10 00 00 00 00 00 00  |................|
00000020  03 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  05 00 00 00 00 00 00 00  06 00 00 00 00 00 00 00  |................|
00000040  30 00 00 00 00 00 00 00  7b 89 54 5d 83 76 a7 b1  |0.......{.T].v..|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00001000  01 00 00 00 00 00 00 00  04 00 00 00 00 00 00 00  |................|
00001010  ed da 0c ed 02 00 00 00  00 10 00 00 00 00 00 00  |................|
00001020  02 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00001030  04 00 00 00 00 00 00 00  06 00 00 00 00 00 00 00  |................|
00001040  31 00 00 00 00 00 00 00  9a ef cd 07 09 0f a1 0a  |1...............|
00001050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00002000  02 00 00 00 00 00 00 00  02 00 02 00 00 00 00 00  |................|
00002010  01 00 00 00 20 00 00 00  0b 00 00 00 45 01 00 00  |.... .......E...|
00002020  01 00 00 00 60 01 00 00  0c 00 00 00 58 00 00 00  |....`.......X...|
00002030  63 68 69 6c 64 42 6c 6f  63 6b 73 00 00 00 00 00  |childBlocks.....|
....
00002100  00 00 00 02 00 00 00 0a  00 00 00 30 74 68 69 73  |...........0this|
00002110  20 69 73 30 31 74 68 69  73 20 69 73 31 32 74 68  | is01this is12th|
00002120  69 73 20 69 73 32 33 74  68 69 73 20 69 73 33 34  |is is23this is34|
00002130  74 68 69 73 20 69 73 34  63 30 74 68 69 73 20 69  |this is4c0this i|
00002140  73 20 63 30 63 31 74 68  69 73 20 69 73 20 63 31  |s c0c1this is c1|
00002150  63 32 74 68 69 73 20 69  73 20 63 32 63 33 74 68  |c2this is c2c3th|
00002160  69 73 20 69 73 20 63 33  63 34 74 68 69 73 20 69  |is is c3c4this i|
....
*
00003000  03 00 00 00 00 00 00 00  02 00 02 00 00 00 00 00  |................|
00003010  01 00 00 00 20 00 00 00  0b 00 00 00 29 01 00 00  |.... .......)...|
00003020  01 00 00 00 44 01 00 00  0c 00 00 00 58 00 00 00  |....D.......X...|
....
000030e0  00 00 00 02 00 00 00 0a  00 00 00 00 00 00 00 6d  |...............m|
000030f0  00 00 00 02 00 00 00 0a  00 00 00 30 74 68 69 73  |...........0this|
00003100  20 69 73 30 31 74 68 69  73 20 69 73 31 32 74 68  | is01this is12th|
00003110  69 73 20 69 73 32 33 74  68 69 73 20 69 73 33 34  |is is23this is34|
00003120  74 68 69 73 20 69 73 34  63 30 74 68 69 73 20 69  |this is4c0this i|
00003130  73 20 63 30 63 32 74 68  69 73 20 69 73 20 63 32  |s c0c2this is c2|
00003140  63 33 74 68 69 73 20 69  73 20 63 33 63 34 74 68  |c3this is c3c4th|
00003150  69 73 20 69 73 20 63 34  63 35 74 68 69 73 20 69  |is is c4c5this i|
00003160  73 20 63 35 66 61 74 68  65 72 42 6c 6f 63 6b 73  |s c5fatherBlocks|
00003170  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00003180  00 00 00 00 00 00 00 00  02 00 02 00 00 00 00 00  |................|
00003190  00 00 00 00 20 00 00 00  02 00 00 00 0a 00 00 00  |.... ...........|
000031a0  00 00 00 00 1c 00 00 00  02 00 00 00 0a 00 00 00  |................|
000031b0  66 31 74 68 69 73 20 69  73 20 66 31 66 32 74 68  |f1this is f1f2th|
000031c0  69 73 20 69 73 20 66 32  00 00 00 00 00 00 00 00  |is is f2........|
000031d0  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00004000  04 00 00 00 00 00 00 00  10 00 02 00 00 00 00 00  |................|
00004010  03 00 00 00 00 00 00 00  05 00 00 00 00 00 00 00  |................|
00004020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00005000  05 00 00 00 00 00 00 00  10 00 02 00 00 00 00 00  |................|
00005010  02 00 00 00 00 00 00 00  04 00 00 00 00 00 00 00  |................|
00005020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
*
00008000
```

16进制1000=十进制4096byte

0000    // 0   偏移
1000    // 4k  偏移
2000    // 8k  偏移
3000    // 12k 偏移
4000    // 16k 偏移
5000    // 20k 偏移

每个偏移都是 4k 的间隔
